<div class="articles-page">
  <!-- ç¯©é¸å€ -->
  <section class="filter-section">
    <div class="filter-container">
      <div class="filter-row">
        <div class="filter-left">
          <nz-page-header (nzBack)="onBack()" nzBackIcon nzSubtitle="è¿”å›é¦–é "></nz-page-header>
        </div>
        <div class="filter-right">
          <nz-date-picker nzMode="year" [(ngModel)]="selectedYearDate" (ngModelChange)="onFilter()" nzFormat="yyyy"
            nzPlaceHolder="é¸æ“‡å¹´ä»½" nzVariant="underlined">
          </nz-date-picker>
          <nz-select [(ngModel)]="sortBy" class="filter-select sort-select" (ngModelChange)="onSort()" nzVariant="underlined">
            <nz-option nzValue="newest" nzLabel="æœ€æ–°ç™¼å¸ƒ"></nz-option>
            <nz-option nzValue="oldest" nzLabel="æœ€èˆŠç™¼å¸ƒ"></nz-option>
            <nz-option nzValue="title" nzLabel="æ¨™é¡Œæ’åº"></nz-option>
          </nz-select>
          <nz-input-search nzAllowClear (nzSearch)="onSearch()" class="search-input">
            <input nz-input [(ngModel)]="searchText" placeholder="æœå°‹æ–‡ç« ï¼Œå…§å®¹" />
          </nz-input-search>
        </div>
      </div>
    </div>
  </section>

  <!-- æ–‡ç« åˆ—è¡¨ -->
  <section class="articles-section">
    <div class="articles-container">
      <div class="articles-main">
        <div class="articles-header">
          <h2 class="section-title">
            å…¨éƒ¨æ–‡ç« 
          </h2>
          <span class="articles-count">{{ filteredArticles.length }} ç¯‡æ–‡ç« </span>
        </div>

        @if (filteredArticles.length > 0) {
          <div class="articles-list">
            @for (article of paginatedArticles; track article.id; let i = $index) {
              <article class="article-card animate-card" [style.animation-delay]="(i * 0.1) + 's'" [routerLink]="['/articles', article.id]">
                  <div class="article-body">
                    <div class="article-header">
                      <span class="article-date">{{ article.date }}</span>
                    </div>
                    <h3 class="article-title">{{ article.title }}</h3>
                    <p class="article-excerpt">{{ article.excerpt }}</p>
                    <div class="article-footer">
                      <div class="article-author">
                        <span class="author-name">{{ article.author }}</span>
                      </div>
                      <div class="article-meta">
                        <span class="read-more">
                          é–±è®€å…¨æ–‡
                          <span nz-icon nzType="arrow-right"></span>
                        </span>
                      </div>
                    </div>
                </div>
                <div class="article-hover-line"></div>
              </article>
            }
          </div>

          <!-- åˆ†é  -->
          <div class="pagination-wrapper">
            <nz-pagination
              [nzPageIndex]="currentPage"
              [nzPageSize]="pageSize"
              [nzTotal]="filteredArticles.length"
              [nzShowTotal]="totalTemplate"
              [nzShowSizeChanger]="true"
              (nzPageIndexChange)="onPageChange($event)">
            </nz-pagination>
            <ng-template #totalTemplate let-total>
              å…± {{ total }} ç¯‡
            </ng-template>
          </div>
        }
        @else {
          <!-- ç©ºç‹€æ…‹ -->
          <div class="empty-state">
            <div class="empty-illustration">
              <span class="empty-icon">ğŸ“„</span>
            </div>
            <h3 class="empty-title">æ‰¾ä¸åˆ°ç›¸é—œæ–‡ç« </h3>
            <p class="empty-text">å˜—è©¦èª¿æ•´æœå°‹æ¢ä»¶æˆ–ç€è¦½å…¶ä»–åˆ†é¡</p>
            <button nz-button nzType="primary" (click)="resetFilters()">
              <span nz-icon nzType="reload"></span>
              <span>é‡è¨­ç¯©é¸</span>
            </button>
          </div>
        }
      </div>
    </div>
  </section>
</div>
